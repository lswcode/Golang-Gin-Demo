{"version":3,"sources":["webpack:///./src/components/My.vue?0055","webpack:///src/components/My.vue","webpack:///./src/components/My.vue?9f62","webpack:///./src/components/My.vue","webpack:///./src/components/My.vue?13d0","webpack:///./src/request/request.js","webpack:///./src/request/api.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","$store","state","_v","_s","user","account","userName","attrs","on","onLogout","$event","$router","push","name","staticRenderFns","components","props","computed","watch","token","getUserInfo","methods","data","code","$toast","fail","forbidClick","message","$dialog","component","request","axios","create","baseURL","timeout","formApi","defaults","headers","post","interceptors","use","req","store","Authorization","response","res","console","warn","msg","err","status","commit","router","login","method","url","getUser","getChannelName","getChannelArticleByName","params","getChannelArticleByContent","content","getSearchSuggest","inputContent","formUpload"],"mappings":"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","file":"js/chunk-426d0a94.b6810fdd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my\"},[(_vm.$store.state.token)?_c('div',{staticClass:\"isLogin\"},[_c('div',{staticClass:\"header\"},[_c('span',[_vm._v(\"账号 \"+_vm._s(_vm.user.account))]),_c('span',[_vm._v(\"用户名 \"+_vm._s(_vm.user.userName))])]),_c('div',{staticClass:\"middle\"},[_c('van-grid',[_c('van-grid-item',[_c('span',{staticClass:\"count\"},[_vm._v(\"111\")]),_c('span',{staticClass:\"text\"},[_vm._v(\"消息\")])]),_c('van-grid-item',[_c('span',{staticClass:\"count\"},[_vm._v(\"111\")]),_c('span',{staticClass:\"text\"},[_vm._v(\"粉丝\")])]),_c('van-grid-item',[_c('span',{staticClass:\"count\"},[_vm._v(\"111\")]),_c('span',{staticClass:\"text\"},[_vm._v(\"获赞\")])]),_c('van-grid-item',[_c('span',{staticClass:\"count\"},[_vm._v(\"111\")]),_c('span',{staticClass:\"text\"},[_vm._v(\"关注\")])])],1)],1),_c('div',[_c('van-cell-group',{attrs:{\"border\":false}},[_c('van-cell',{attrs:{\"title\":\"我的消息\",\"is-link\":\"\"}})],1),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"我的收藏\",\"is-link\":\"\"}})],1),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"个人信息\",\"is-link\":\"\"}})],1),_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"用户设置\",\"is-link\":\"\"}})],1),_c('van-button',{staticClass:\"button\",attrs:{\"plain\":\"\",\"type\":\"info\"},on:{\"click\":_vm.onLogout}},[_vm._v(\"退出登录\")])],1)]):_c('div',{staticClass:\"notLogin\"},[_c('van-button',{staticClass:\"button\",attrs:{\"plain\":\"\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.$router.push({name: 'Login'})}}},[_vm._v(\"点击登录\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"my\">\r\n    <div class=\"isLogin\" v-if=\"$store.state.token\">\r\n      <div class=\"header\">\r\n        <span>账号 {{user.account}}</span>\r\n        <span>用户名 {{user.userName}}</span>\r\n      </div>\r\n      <div class=\"middle\">\r\n        <van-grid>\r\n          <!-- 可以使用上下都是文字，也可以图标加文字 -->\r\n          <van-grid-item>\r\n            <span class=\"count\">111</span>\r\n            <span class=\"text\">消息</span>\r\n          </van-grid-item>\r\n          <van-grid-item>\r\n            <span class=\"count\">111</span>\r\n            <span class=\"text\">粉丝</span>\r\n          </van-grid-item>\r\n          <van-grid-item>\r\n            <span class=\"count\">111</span>\r\n            <span class=\"text\">获赞</span>\r\n          </van-grid-item>\r\n          <van-grid-item>\r\n            <span class=\"count\">111</span>\r\n            <span class=\"text\">关注</span>\r\n          </van-grid-item>\r\n        </van-grid>\r\n      </div>\r\n      <div>\r\n        <van-cell-group :border=\"false\">\r\n          <!-- <van-cell title=\"消息通知\" is-link /> -->\r\n          <van-cell title=\"我的消息\" is-link />\r\n        </van-cell-group>\r\n        <van-cell-group>\r\n          <van-cell title=\"我的收藏\" is-link />\r\n        </van-cell-group>\r\n        <van-cell-group>\r\n          <van-cell title=\"个人信息\" is-link />\r\n        </van-cell-group>\r\n        <van-cell-group>\r\n          <van-cell title=\"用户设置\" is-link />\r\n        </van-cell-group>\r\n        <van-button class=\"button\" plain type=\"info\" @click=\"onLogout\">退出登录</van-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"notLogin\" v-else>\r\n      <van-button class=\"button\" plain type=\"info\" @click=\"$router.push({name: 'Login'})\">点击登录</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getUser } from \"@/request/api.js\";\r\nexport default {\r\n  name: \"My\",\r\n  components: {},\r\n  props: {},\r\n  data() {\r\n    return {\r\n      user: {},\r\n    };\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created() {\r\n    if (this.$store.state.token) {\r\n      this.getUserInfo();\r\n    }\r\n  },\r\n  methods: {\r\n    async getUserInfo() {\r\n      try {\r\n        const { data } = await getUser();\r\n        if (data.code == 1) {\r\n          this.user = data.data;\r\n          console.log(this.user.account, this.user.userName);\r\n        }\r\n      } catch (err) {\r\n        this.$toast.fail({\r\n          forbidClick: true, // 是否禁止背景点击\r\n          message: \"获取用户数据失败\",\r\n        });\r\n      }\r\n    },\r\n    onLogout() {\r\n      this.$dialog\r\n        .confirm({\r\n          title: \"退出确认\",\r\n          message: \"退出当前头条账号，将不能同步收藏，发布评论和云端分享等\",\r\n        })\r\n        .then(() => {\r\n          // 确认执行这里\r\n          // 清除容器和本地存储的数据\r\n          this.$store.commit(\"clearToken\");\r\n        })\r\n        .catch(() => {\r\n          // 取消执行这里\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang='less' scoped>\r\n.my {\r\n  font-size: 0.47rem;\r\n}\r\n.header {\r\n  display: flex;\r\n  height: 2rem;\r\n  background-color: rgb(81, 161, 236);\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.button {\r\n  margin-top: 2rem;\r\n  width: 100%;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./My.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./My.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./My.vue?vue&type=template&id=797c28c7&scoped=true&\"\nimport script from \"./My.vue?vue&type=script&lang=js&\"\nexport * from \"./My.vue?vue&type=script&lang=js&\"\nimport style0 from \"./My.vue?vue&type=style&index=0&id=797c28c7&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"797c28c7\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./My.vue?vue&type=style&index=0&id=797c28c7&lang=less&scoped=true&\"","import axios from \"axios\";\r\nimport store from \"@/store\";\r\nimport router from \"@/router\";\r\n\r\nconst request = axios.create({\r\n  baseURL: process.env.NODE_ENV === \"production\" ? \"http://localhost:3000\" : \"api\", // 请求的基础路径\r\n  timeout: 8000, // 请求超时时间\r\n});\r\n// ------------------------------------------------------\r\nconst formApi = axios.create({\r\n  // form表单测试请求\r\n  baseURL: process.env.NODE_ENV === \"production\" ? \"http://localhost:8080\" : \"cs\",\r\n  timeout: 8000, // 请求超时时间\r\n});\r\nformApi.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\"; // 当使用formData格式发送数据给后端时，需要设置请求头的Content-Type为application/x-www-form-urlencoded\r\n// 表示使用form表单默认的提交数据的格式，正常情况下，等价于multipart/form-data，因为表单默认的提交数据格式就是multipart/form-data\r\n// -------------------------------------------------\r\n\r\nrequest.interceptors.request.use((req) => {\r\n  const token = store.state.token; // 因为这个js不是xx.vue的vue组件文件，所以无法使用this.$store和this.router,需要手动import导入store和router\r\n  if (token) {\r\n    req.headers.Authorization = `Bearer ${token}`; // 给请求都带上token\r\n  }\r\n\r\n  return req;\r\n});\r\n\r\nrequest.interceptors.response.use(\r\n  (res) => {\r\n    const { data } = res;\r\n    if (data.code !== 1) {\r\n      console.warn(data.msg);\r\n    }\r\n    return res;\r\n  },\r\n  (err) => {\r\n    // 防止随便伪造一个token进入非登录页面，虽然无法发起请求，但是可以进入页面，这不够安全,---以及当token过期无效/被手动修改等以外情况时\r\n    // 如果响应返回401，则表示token无效，清除本地token，并返回登录页\r\n    if (err.response.status && err.response.status == 401) {\r\n      store.commit(\"clearToken\");\r\n      router.push({ name: \"Login\" });\r\n    }\r\n  }\r\n);\r\n\r\nexport default request;\r\nexport { formApi };\r\n","import request, { formApi } from \"./request.js\";\r\n\r\n// -------------------用户相关接口-------------------------------------------------------------\r\n// let token = store.state.token;\r\n// 如果写在这里，然后又在下面的export函数中使用，这个表达式只会在这个JS第一次被import导入时执行一次，然后这个值就固定不会变化了，除非页面刷新\r\n// 即写在export外的数据是不会自动更新变化的，因为被导入会更新执行的只有export里的函数\r\n// 所以解决方法是将需要更新变化的值写在export函数中，export default也一样，要把更新的数据写在export default函数里面\r\n\r\nexport const login = (user) => {\r\n  // 登录接口\r\n  return request({\r\n    method: \"POST\",\r\n    url: `/user/login`,\r\n    data: user,\r\n  });\r\n};\r\n\r\nexport const getUser = () => {\r\n  // let token = store.state.token;  // 应该写在这里面，这样每次调用这个函数，都会更新获取token\r\n  return request({\r\n    method: \"GET\",\r\n    url: \"/userAdmin/findUserById\",\r\n  });\r\n};\r\n// ---------------------频道api------------------------------------------\r\n// -------------------获取所有频道名称----------------------------------\r\nexport const getChannelName = () => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: \"/channel/channelName\",\r\n  });\r\n};\r\n// -------------------根据频道名称返回文章----------------------------------------\r\nexport const getChannelArticleByName = (params) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/findByName`,\r\n    params,\r\n  });\r\n};\r\n// -------------------点击搜索内容返回搜索结果---------------------------------------\r\nexport const getChannelArticleByContent = (content) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/findByContent`,\r\n    params: {\r\n      content,\r\n    },\r\n  });\r\n};\r\n\r\n// ------------------返回搜索建议接口-------------------------------\r\nexport const getSearchSuggest = (inputContent) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/search`,\r\n    params: {\r\n      inputContent,\r\n    },\r\n  });\r\n};\r\n\r\nexport const formUpload = (data) => {\r\n  return formApi({\r\n    method: \"POST\",\r\n    url: `upload`,\r\n    data,\r\n  });\r\n};\r\n"],"sourceRoot":""}