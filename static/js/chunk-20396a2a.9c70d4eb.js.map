{"version":3,"sources":["webpack:///./src/components/ArticleList.vue?f2e0","webpack:///./src/components/Home.vue?5b5e","webpack:///./src/components/ArticleList.vue?04c0","webpack:///src/components/ArticleList.vue","webpack:///./src/components/ArticleList.vue?519a","webpack:///./src/components/ArticleList.vue","webpack:///src/components/Home.vue","webpack:///./src/components/Home.vue?705d","webpack:///./src/components/Home.vue","webpack:///./src/components/Home.vue?46b9","webpack:///./src/request/request.js","webpack:///./src/request/api.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","active","expression","_l","item","key","staticRenderFns","refreshSuccessText","on","onLoadByTop","isRefreshLoading","finished","onLoad","loading","id","content","name","components","props","channelName","type","String","required","channelList","page","computed","watch","methods","push","data","length","unshift","component","channelNameList","loadChannels","request","axios","create","baseURL","timeout","formApi","defaults","headers","post","interceptors","use","req","token","store","state","Authorization","response","res","code","console","warn","msg","err","status","commit","router","login","user","method","url","getUser","getChannelName","getChannelArticleByName","params","getChannelArticleByContent","getSearchSuggest","inputContent","formUpload"],"mappings":"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","file":"js/chunk-20396a2a.9c70d4eb.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=style&index=0&id=39cc032a&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('van-tabs',{attrs:{\"title-active-color\":\"#3196fa\"},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.channelNameList),function(item){return _c('van-tab',{key:item,attrs:{\"title\":item}},[_c('ArticleList',{attrs:{\"channelName\":item}})],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"articleList\"},[_c('van-pull-refresh',{attrs:{\"success-text\":_vm.refreshSuccessText,\"success-duration\":1500},on:{\"refresh\":_vm.onLoadByTop},model:{value:(_vm.isRefreshLoading),callback:function ($$v) {_vm.isRefreshLoading=$$v},expression:\"isRefreshLoading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"offset\":\"0\",\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.channelList),function(item){return _c('van-cell',{key:item.id,attrs:{\"value\":item.content}})}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"articleList\">\r\n    <van-pull-refresh v-model=\"isRefreshLoading\" :success-text=\"refreshSuccessText\" :success-duration=\"1500\" @refresh=\"onLoadByTop\">\r\n      <!-- 当列表底部与可视区域的距离小于offset时，List会自动一次@load事件，即执行一次绑定的函数 -->\r\n      <van-list v-model=\"loading\" :finished=\"finished\" offset='0' finished-text=\"没有更多了\" @load=\"onLoad\">\r\n        <!-- 里面包裹的其实是van-cell组件 -->\r\n        <van-cell v-for=\"item in channelList\" :key=\"item.id\" :value=\"item.content\" />\r\n      </van-list>\r\n      <!-- 如果一次请求加载的数据条数较少，导致列表内容无法铺满当前屏幕，List 会继续触发 load 事件，直到内容铺满屏幕或数据全部加载完成 -->\r\n      <!-- 因此你需要调整每次获取的数据条数，理想情况下每次请求获取的数据条数应能够填满一屏高度 -->\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getChannelArticleByName } from \"../request/api\";\r\nexport default {\r\n  name: \"ArticleList\",\r\n  components: {},\r\n  props: {\r\n    channelName: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      channelList: [],\r\n      loading: false, // 上滑底部刷新\r\n      finished: false,\r\n      page: 0,\r\n      isRefreshLoading: false, // 下拉顶部刷新的 loading 状态\r\n      refreshSuccessText: \"\", // 下拉顶部刷新成功的提示文本\r\n    };\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created() {},\r\n  methods: {\r\n    // 每次加载返回固定数量的数据,具体多少条根据页面长度决定,需要和后端约定好每次返回多少条,推荐就是刚好铺满屏幕或超出一些\r\n    // 第一次请求时自动发起的,如果没有铺满屏幕,会自动发起第二次请求\r\n    // 所以其实就和页码是一样的,一次请求就是加载新的一页,每一页固定的条数\r\n    async onLoad() {\r\n      try {\r\n        // 1. 请求获取数据\r\n        const { data } = await getChannelArticleByName({\r\n          name: this.channelName,\r\n          page: ++this.page,\r\n        });\r\n        // 2. 在保留原来数据的基础上，把新数据添加到list数组中\r\n        this.channelList.push(...data.data);\r\n        // 3. 设置本次加载状态结束，否则一直显示加载中，无法再次加载\r\n        this.loading = false;\r\n        console.log(data.data);\r\n        if (data.data.length == 0) {\r\n          // 4. 数据全部加载完成，没有新数据了，设置加载完成，不再继续触发\r\n          this.finished = true;\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    async onLoadByTop() {\r\n      // 下拉刷新，组件自己就会展示 loading 状态\r\n      // 1. 请求获取数据\r\n      const { data } = await getChannelArticleByName({\r\n        name: this.channelName,\r\n        page: ++this.page,\r\n      });\r\n      // 2. 把数据放到数据列表中（往顶部追加）\r\n      this.channelList.unshift(...data.data);\r\n      // 3. 关闭刷新的状态 loading\r\n      this.isRefreshLoading = false;\r\n      this.refreshSuccessText = `更新了${data.data.length}条数据`;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang='less' scoped>\r\n// 设置list固定定位，并设置距离底部的距离，防止被底部的导航栏挡住以及影响到上方的标签栏\r\n.articleList {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 90px;\r\n  bottom: 50px;\r\n  overflow-y: auto;\r\n}\r\n.van-cell {\r\n  height: 100px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleList.vue?vue&type=template&id=39cc032a&scoped=true&\"\nimport script from \"./ArticleList.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleList.vue?vue&type=style&index=0&id=39cc032a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39cc032a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"home\">\n    <!-- 文章频道列表，根据请求返回的频道数据进行渲染 -->\n    <van-tabs v-model=\"active\" title-active-color='#3196fa'>\n      <van-tab v-for=\"item in channelNameList\" :title=\"item\" :key=\"item\">\n        <!-- 将选中的channel传给子组件，来控制显示的内容 -->\n        <ArticleList :channelName=\"item\" />\n      </van-tab>\n    </van-tabs>\n    <!-- /文章频道列表 -->\n\n    <!-- /导航栏 -->\n  </div>\n</template>\n\n<script>\nimport { getChannelName } from \"@/request/api.js\";\nimport ArticleList from \"@/components/ArticleList.vue\";\nexport default {\n  name: \"Home\",\n  components: { ArticleList },\n  props: {},\n  data() {\n    return {\n      active: 2, // 控制被激活的标签\n      channelNameList: [],\n    };\n  },\n  computed: {},\n  watch: {},\n  created() {\n    this.loadChannels();\n  },\n  methods: {\n    async loadChannels() {\n      console.log(process.env.NODE_ENV);\n      try {\n        const { data } = await getChannelName();\n        console.log(data);\n        this.channelNameList = data.data;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n  },\n};\n</script>\n<style lang='less' scoped>\n.home {\n  overflow: hidden;\n}\n\n.van-tabs {\n  margin-top: 20px;\n}\n.home /deep/ .van-tabs__line {\n  background-color: #3196fa !important;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=b7b3b3f8&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=b7b3b3f8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b7b3b3f8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=b7b3b3f8&lang=less&scoped=true&\"","import axios from \"axios\";\r\nimport store from \"@/store\";\r\nimport router from \"@/router\";\r\n\r\nconst request = axios.create({\r\n  baseURL: process.env.NODE_ENV === \"production\" ? \"http://localhost:3000\" : \"api\", // 请求的基础路径\r\n  timeout: 8000, // 请求超时时间\r\n});\r\n// ------------------------------------------------------\r\nconst formApi = axios.create({\r\n  // form表单测试请求\r\n  baseURL: process.env.NODE_ENV === \"production\" ? \"http://localhost:8080\" : \"cs\",\r\n  timeout: 8000, // 请求超时时间\r\n});\r\nformApi.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\"; // 当使用formData格式发送数据给后端时，需要设置请求头的Content-Type为application/x-www-form-urlencoded\r\n// 表示使用form表单默认的提交数据的格式，正常情况下，等价于multipart/form-data，因为表单默认的提交数据格式就是multipart/form-data\r\n// -------------------------------------------------\r\n\r\nrequest.interceptors.request.use((req) => {\r\n  const token = store.state.token; // 因为这个js不是xx.vue的vue组件文件，所以无法使用this.$store和this.router,需要手动import导入store和router\r\n  if (token) {\r\n    req.headers.Authorization = `Bearer ${token}`; // 给请求都带上token\r\n  }\r\n\r\n  return req;\r\n});\r\n\r\nrequest.interceptors.response.use(\r\n  (res) => {\r\n    const { data } = res;\r\n    if (data.code !== 1) {\r\n      console.warn(data.msg);\r\n    }\r\n    return res;\r\n  },\r\n  (err) => {\r\n    // 防止随便伪造一个token进入非登录页面，虽然无法发起请求，但是可以进入页面，这不够安全,---以及当token过期无效/被手动修改等以外情况时\r\n    // 如果响应返回401，则表示token无效，清除本地token，并返回登录页\r\n    if (err.response.status && err.response.status == 401) {\r\n      store.commit(\"clearToken\");\r\n      router.push({ name: \"Login\" });\r\n    }\r\n  }\r\n);\r\n\r\nexport default request;\r\nexport { formApi };\r\n","import request, { formApi } from \"./request.js\";\r\n\r\n// -------------------用户相关接口-------------------------------------------------------------\r\n// let token = store.state.token;\r\n// 如果写在这里，然后又在下面的export函数中使用，这个表达式只会在这个JS第一次被import导入时执行一次，然后这个值就固定不会变化了，除非页面刷新\r\n// 即写在export外的数据是不会自动更新变化的，因为被导入会更新执行的只有export里的函数\r\n// 所以解决方法是将需要更新变化的值写在export函数中，export default也一样，要把更新的数据写在export default函数里面\r\n\r\nexport const login = (user) => {\r\n  // 登录接口\r\n  return request({\r\n    method: \"POST\",\r\n    url: `/user/login`,\r\n    data: user,\r\n  });\r\n};\r\n\r\nexport const getUser = () => {\r\n  // let token = store.state.token;  // 应该写在这里面，这样每次调用这个函数，都会更新获取token\r\n  return request({\r\n    method: \"GET\",\r\n    url: \"/userAdmin/findUserById\",\r\n  });\r\n};\r\n// ---------------------频道api------------------------------------------\r\n// -------------------获取所有频道名称----------------------------------\r\nexport const getChannelName = () => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: \"/channel/channelName\",\r\n  });\r\n};\r\n// -------------------根据频道名称返回文章----------------------------------------\r\nexport const getChannelArticleByName = (params) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/findByName`,\r\n    params,\r\n  });\r\n};\r\n// -------------------点击搜索内容返回搜索结果---------------------------------------\r\nexport const getChannelArticleByContent = (content) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/findByContent`,\r\n    params: {\r\n      content,\r\n    },\r\n  });\r\n};\r\n\r\n// ------------------返回搜索建议接口-------------------------------\r\nexport const getSearchSuggest = (inputContent) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/search`,\r\n    params: {\r\n      inputContent,\r\n    },\r\n  });\r\n};\r\n\r\nexport const formUpload = (data) => {\r\n  return formApi({\r\n    method: \"POST\",\r\n    url: `upload`,\r\n    data,\r\n  });\r\n};\r\n"],"sourceRoot":""}