{"version":3,"sources":["webpack:///./src/views/Login.vue?26f4","webpack:///./src/views/Login.vue?1d3e","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue","webpack:///./src/request/request.js","webpack:///./src/request/api.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","onSubmit","attrs","pattern","message","model","value","user","callback","$$v","$set","expression","required","staticStyle","isDisabled","_v","$event","$router","push","staticRenderFns","name","components","props","account","password","computed","watch","methods","$toast","loading","duration","forbidClick","data","code","token","$store","commit","success","fail","msg","component","request","axios","create","baseURL","timeout","formApi","defaults","headers","post","interceptors","use","req","store","state","Authorization","response","res","console","warn","err","status","router","login","method","url","getUser","getChannelName","getChannelArticleByName","params","getChannelArticleByContent","content","getSearchSuggest","inputContent","formUpload"],"mappings":"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","file":"js/chunk-69782ba9.83ad0688.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=2c9f5f6c&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('van-form',{staticClass:\"loginForm\",on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"账号\",\"label\":\"账号\",\"placeholder\":\"账号\",\"rules\":[{ pattern: _vm.pattern, message: '请输入正确格式:6-12个字符' }]},model:{value:(_vm.user.account),callback:function ($$v) {_vm.$set(_vm.user, \"account\", $$v)},expression:\"user.account\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"密码\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[{ required: true, message: '请填写密码' }]},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"native-type\":\"submit\",\"type\":\"info\",\"disabled\":_vm.isDisabled}},[_vm._v(\"登录\")])],1)],1),_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.$router.push('/')}}},[_vm._v(\"返回首页\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login\">\r\n    <van-form @submit=\"onSubmit\" class=\"loginForm\">\r\n      <van-field v-model=\"user.account\" name=\"账号\" label=\"账号\" placeholder=\"账号\" :rules=\"[{ pattern, message: '请输入正确格式:6-12个字符' }]\" />\r\n      <!-- 可以直接简单的进行判断是否输入内容，使用required，也可以使用正则表达式来进行复杂的格式判断 -->\r\n      <van-field v-model=\"user.password\" type=\"password\" name=\"密码\" label=\"密码\" placeholder=\"密码\" :rules=\"[{ required: true, message: '请填写密码' }]\" />\r\n      <div style=\"margin: 16px;\">\r\n        <van-button round block native-type=\"submit\" type=\"info\" :disabled=\"isDisabled\">登录</van-button>\r\n      </div>\r\n    </van-form>\r\n    <van-button round block type=\"info\" @click=\"$router.push('/')\">返回首页</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { login } from \"@/request/api.js\";\r\nexport default {\r\n  name: \"\",\r\n  components: {},\r\n  props: {},\r\n  data() {\r\n    return {\r\n      user: {\r\n        account: \"string147\",\r\n        password: \"string\",\r\n      },\r\n      pattern: /^[0-9a-zA-Z]{6,12}$/,\r\n      isDisabled: false,\r\n    };\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created() {},\r\n  mounted() {},\r\n  methods: {\r\n    // 提交表单按钮\r\n    async onSubmit() {\r\n      this.isDisabled = true;\r\n      this.$toast.loading({\r\n        duration: 0, // 持续时间，0表示持续展示不停止,不写的话默认是3秒\r\n        forbidClick: true, // 是否禁止背景点击\r\n        message: \"登录中...\", // 提示消息\r\n      });\r\n      try {\r\n        const { data } = await login(this.user);\r\n        if (data.code == 1 && data.token) {\r\n          this.$store.commit(\"changeToken\", data.token); // 改变store中的token，同时存储到本地\r\n          this.$toast.success(\"登录成功\");\r\n          this.$router.push({ name: \"My\" }); //vue2中直接使用即可，不需要导入router，this.$router是固定写法\r\n        } else if (data.code == 2) {\r\n          this.$toast.fail({\r\n            forbidClick: true, // 是否禁止背景点击\r\n            message: data.msg,\r\n          });\r\n        } else if (data.code == 0) {\r\n          this.$toast.fail({\r\n            forbidClick: true,\r\n            message: data.msg,\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n        this.$toast.fail({\r\n          forbidClick: true, // 是否禁止背景点击\r\n          message: \"登录失败\",\r\n        });\r\n      } finally {\r\n        this.isDisabled = false; // 无论什么结果最终都是去掉禁用状态\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang='less' scoped>\r\n.login {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.loginForm {\r\n  width: 80%;\r\n}\r\n.van-button {\r\n  margin: 0 auto;\r\n  width: 200px;\r\n  margin-top: 100px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=2c9f5f6c&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=2c9f5f6c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c9f5f6c\",\n  null\n  \n)\n\nexport default component.exports","import axios from \"axios\";\r\nimport store from \"@/store\";\r\nimport router from \"@/router\";\r\n\r\nconst request = axios.create({\r\n  baseURL: process.env.NODE_ENV === \"production\" ? \"http://localhost:3000\" : \"api\", // 请求的基础路径\r\n  timeout: 8000, // 请求超时时间\r\n});\r\n// ------------------------------------------------------\r\nconst formApi = axios.create({\r\n  // form表单测试请求\r\n  baseURL: process.env.NODE_ENV === \"production\" ? \"http://localhost:8080\" : \"cs\",\r\n  timeout: 8000, // 请求超时时间\r\n});\r\nformApi.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\"; // 当使用formData格式发送数据给后端时，需要设置请求头的Content-Type为application/x-www-form-urlencoded\r\n// 表示使用form表单默认的提交数据的格式，正常情况下，等价于multipart/form-data，因为表单默认的提交数据格式就是multipart/form-data\r\n// -------------------------------------------------\r\n\r\nrequest.interceptors.request.use((req) => {\r\n  const token = store.state.token; // 因为这个js不是xx.vue的vue组件文件，所以无法使用this.$store和this.router,需要手动import导入store和router\r\n  if (token) {\r\n    req.headers.Authorization = `Bearer ${token}`; // 给请求都带上token\r\n  }\r\n\r\n  return req;\r\n});\r\n\r\nrequest.interceptors.response.use(\r\n  (res) => {\r\n    const { data } = res;\r\n    if (data.code !== 1) {\r\n      console.warn(data.msg);\r\n    }\r\n    return res;\r\n  },\r\n  (err) => {\r\n    // 防止随便伪造一个token进入非登录页面，虽然无法发起请求，但是可以进入页面，这不够安全,---以及当token过期无效/被手动修改等以外情况时\r\n    // 如果响应返回401，则表示token无效，清除本地token，并返回登录页\r\n    if (err.response.status && err.response.status == 401) {\r\n      store.commit(\"clearToken\");\r\n      router.push({ name: \"Login\" });\r\n    }\r\n  }\r\n);\r\n\r\nexport default request;\r\nexport { formApi };\r\n","import request, { formApi } from \"./request.js\";\r\n\r\n// -------------------用户相关接口-------------------------------------------------------------\r\n// let token = store.state.token;\r\n// 如果写在这里，然后又在下面的export函数中使用，这个表达式只会在这个JS第一次被import导入时执行一次，然后这个值就固定不会变化了，除非页面刷新\r\n// 即写在export外的数据是不会自动更新变化的，因为被导入会更新执行的只有export里的函数\r\n// 所以解决方法是将需要更新变化的值写在export函数中，export default也一样，要把更新的数据写在export default函数里面\r\n\r\nexport const login = (user) => {\r\n  // 登录接口\r\n  return request({\r\n    method: \"POST\",\r\n    url: `/user/login`,\r\n    data: user,\r\n  });\r\n};\r\n\r\nexport const getUser = () => {\r\n  // let token = store.state.token;  // 应该写在这里面，这样每次调用这个函数，都会更新获取token\r\n  return request({\r\n    method: \"GET\",\r\n    url: \"/userAdmin/findUserById\",\r\n  });\r\n};\r\n// ---------------------频道api------------------------------------------\r\n// -------------------获取所有频道名称----------------------------------\r\nexport const getChannelName = () => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: \"/channel/channelName\",\r\n  });\r\n};\r\n// -------------------根据频道名称返回文章----------------------------------------\r\nexport const getChannelArticleByName = (params) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/findByName`,\r\n    params,\r\n  });\r\n};\r\n// -------------------点击搜索内容返回搜索结果---------------------------------------\r\nexport const getChannelArticleByContent = (content) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/findByContent`,\r\n    params: {\r\n      content,\r\n    },\r\n  });\r\n};\r\n\r\n// ------------------返回搜索建议接口-------------------------------\r\nexport const getSearchSuggest = (inputContent) => {\r\n  return request({\r\n    method: \"GET\",\r\n    url: `/channel/search`,\r\n    params: {\r\n      inputContent,\r\n    },\r\n  });\r\n};\r\n\r\nexport const formUpload = (data) => {\r\n  return formApi({\r\n    method: \"POST\",\r\n    url: `upload`,\r\n    data,\r\n  });\r\n};\r\n"],"sourceRoot":""}